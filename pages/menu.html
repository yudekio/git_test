<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles.css" />
    <title>Menu</title>
  </head>
  <body>
    <div id="show-btn"></div>
    <div>
      <table id="table-array">
        <tr>
          <th>Улучшение</th>
          <th>Цена</th>
        </tr>
        <tr>
          <td id="change">+1 карта</td>
          <td>20 коинов</td>
          <td class="btn-buy">купить</td>
        </tr>
        <tr>
          <td>+0.2 коинов в секунду</td>
          <td>50 коинов</td>
          <td class="btn-buy">купить</td>
        </tr>
        <tr>
          <td>Суперспособность: искажение</td>
          <td>100 коинов</td>
          <td class="btn-buy">купить</td>
        </tr>
      </table>
    </div>
    <div>
      <h2 id="h2-text">List<span> </span></h2>
      <form>
        <label>Add new item:</label>
        <input type="text" id="input" />
        <button id="btn-add">Add</button>
      </form>
      <ul id="list"></ul>
      <div>
        <a href="/pages/world-creator.html">Создать новый мир</a>
      </div>
    </div>
    <script>
      // DOM Elements
      const inputEl = document.querySelector("#input");
      const btnAdd = document.querySelector("#btn-add");
      const h2Text = document.querySelector("#h2-text");
      const list = document.querySelector("#list");

      // Init
      let inputVal = "";

      // Event listeners
      inputEl.addEventListener("input", handleInput);

      btnAdd.addEventListener("click", (event) => {
        event.preventDefault();
        addEl(inputVal);
      });

      // Functions

      function handleInput(event) {
        h2Text.innerText = event.target.value;
        inputVal = event.target.value;
      }
      function addEl(text) {
        const newEl = document.createElement("li");
        newEl.innerHTML = `${text} <button id="btn-del" onclick="delEl(event)">delete</button>`;
        list.appendChild(newEl);
      }

      function delEl(e) {
        const listItem = e.target.parentNode;
        listItem.parentNode.removeChild(listItem);
      }

      /////////////////////////////////////////////////////////

      const btnBuyArr = document.querySelectorAll(".btn-buy");
      const div = document.createElement("div");
      div.style.cssText =
        "background-color:#042baa ; width: 10rem; padding: 0.8rem 1.6rem; text-align: center; font-weight: bold; border-radius: 10px; cursor: pointer; border: 2px solid grey";

      div.innerHTML = "Магазин";
      div.addEventListener("click", () => {
        document.getElementById("table-array").classList.toggle("active");
      });
      document.getElementById("show-btn").appendChild(div);

      btnBuyArr.forEach((button) =>
        button.addEventListener("click", (e) => e.target.classList.add("sold"))
      );
    </script>
  </body>
</html>
